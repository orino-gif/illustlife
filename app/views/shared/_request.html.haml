- if nil != @request
  .row.my-5
    .col-md-auto
      = "■申請日時：#{@request.created_at.strftime("%Y/%m/%d %H:%M")}"
      - sender = User.find_by(nickname: @request.sender)
      - receiver = User.find_by(nickname: @request.receiver)
      %table.table
        %tr
          %td= "リクエストID：#{@request.id}"
        %tr
          %td= display_icon(sender.creator, 'size-small-square rounded-circle fit-cover') + "依頼者：" + @request.sender
        %tr
          %td= display_icon(receiver.creator, 'size-small-square rounded-circle fit-cover') + "承認者：" + @request.receiver
        %tr
          %td= "状態：#{@request.status}"
        %tr
          %td= "金額：#{@request.money}円"
        %tr
          %td.string-indention= "リクエスト内容：#{@request.message}"
        %tr
          %td.string-indention= "ファイル形式：#{@request.file_format}"
        %tr
          %td.string-indention
            - if nil != current_user
              - if (@request.receiver == current_user.nickname) && ('承認待ち' == @request.status)
                = "#{@request.sender}さんから#{@request.receiver}さんへのリクエストを承認しますか？"
                = button_to '承認', {controller:'requests', action:'index'}, {method: :get, params:{status:'製作中', request_id:@request.id, pressed:'ON'}}
                = button_to '拒否', {controller:'requests', action:'index'}, {method: :get, params:{status:'拒否', request_id:@request.id, pressed:'ON'}}
              - elsif (@request.receiver == current_user.nickname) && ('製作中' == @request.status || '手戻し' == @request.status)
                = form_with(model: @request, local: true) do |f|
                  = f.file_field :deliver_img
                  = f.hidden_field :request_id, :value => @request.id
                  = f.submit '登録'
                = button_to '納品', {controller:'requests', action:'index'}, {method: :get, params:{status:'納品完了', request_id:@request.id, pressed:'ON'}}
    .col-md-auto
      - if @request.deliver_img?
        = link_to image_tag(@request.deliver_img.url, class:'size-large-Horizontal_variable_rectangle fit-cover'), @request.deliver_img.url
    .col-md-auto
      - if ('納品完了' == @request.status) && (user_signed_in?)
        - if @request.sender == current_user.nickname
          %button.btn.btn-light{:type => "button"}= link_to 'ダウンロード', download_request_path(@request)
        - elsif @request.receiver == current_user.nickname
          = button_to '手戻し', {controller: 'requests', action: 'index'}, {method: :get, params:{status:'手戻し', request_id:@request.id, pressed:'ON'}}
